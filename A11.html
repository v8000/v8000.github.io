<html>

<head>
<meta http-equiv="Content-Language" content="zh-cn">
<meta http-equiv="Content-Type" content="text/html; charset=gb2312">

<meta HTTP-EQUIV="pragma" CONTENT="no-cache">
<meta HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
<meta HTTP-EQUIV="expires" CONTENT="0">

<title>我爱学习2016-2017</title>



<script LANGUAGE="javascript">

var c60=0;
var t60;

var c80=0;
var t80;

var newchech=0;
var arrlength=0;
var arrlength9=0;
var txtarr = "";
var txtEnd = "";
var timesget = 0;
var TimeEnd = 0;
var s60 = "　";

var sn   = 0;
var calculateCount60=0;
var calculateCount80=0;

var ooo=0;
var qtotal=0;

//alert("开始");


//if ( newchech==0 )
//{
//    document.getElementById("edt_pwd").value = "  Ready ……";
//}



//放在外面，其他调用
var arrquestions = new Array();
var arrhis = new Array();
var arrrest = new Array();


// 初始化1
function InitialQuestions1() 
{
    //alert("初始化");
    //var arrquestions = new Array();
    arrquestions.splice(0,arrquestions.length);//清空数组 

    // -------------------------------------------------------------
    arrquestions.push("9 + 2");
    arrquestions.push("9 + 3");
    arrquestions.push("9 + 4");
    arrquestions.push("9 + 5");
    arrquestions.push("9 + 6");
    arrquestions.push("9 + 7");
    arrquestions.push("9 + 8");
    arrquestions.push("9 + 9");
    arrquestions.push("8 + 3");
    arrquestions.push("8 + 4");
    arrquestions.push("8 + 5");
    arrquestions.push("8 + 6");
    arrquestions.push("8 + 7");
    arrquestions.push("8 + 8");
    arrquestions.push("8 + 9");
    arrquestions.push("7 + 4");
    arrquestions.push("7 + 5");
    arrquestions.push("7 + 6");
    arrquestions.push("7 + 7");
    arrquestions.push("7 + 8");
    arrquestions.push("7 + 9");
    arrquestions.push("6 + 5");
    arrquestions.push("6 + 6");
    arrquestions.push("6 + 7");
    arrquestions.push("6 + 8");
    arrquestions.push("6 + 9");
    arrquestions.push("5 + 6");
    arrquestions.push("5 + 7");
    arrquestions.push("5 + 8");
    arrquestions.push("5 + 9");
    arrquestions.push("4 + 7");
    arrquestions.push("4 + 8");
    arrquestions.push("4 + 9");
    arrquestions.push("3 + 8");
    arrquestions.push("3 + 9");
    arrquestions.push("2 + 9");


    // -------------------------------------------------------------


    //alert(arrquestions[1]);
    //alert(arrquestions.length);
}




//
function ChoosingQuestions() 
{
    //alert("Choosing");
    if (newchech==0)          //( newchech = 0 )   alert(newchech = 0);
    {
        InitialQuestions1();
        qtotal = arrquestions.length;
        document.getElementById("ctotal").innerText = "本测试，一共 " + qtotal + " 题。"; 

        arrrest = []
        arrrest.length = 0;  // 其它语言如Java，其数组的length是只读的，不能被赋值。Java中会报错
        arrrest.splice(0,arrrest.length);//清空数组 
        Array.prototype.push.apply(arrrest, arrquestions);  // 后面 的 插入 到前面 的
        //alert("arrrest.length=");
        //alert( arrrest.length );
        //console.log(arrrest);

        newchech = 1;
        ooo++;
    }

    arrlength9 = arrquestions.length;
    arrlength=arrrest.length;
    //alert(arrlength);

    txtarr = "";
    while( arrlength > 0 ) {                  // while(1)
        //sn   = Math.floor(Math.random()*arrrest.length);
        //sn   = Math.ceil(Math.random()*(arrlength-1));
        sn   = Math.floor(Math.random()*arrlength);

        if ( sn<arrlength )   // and &&  or    || arrlength==0 
        {
            //alert("选中的sn：");
            //alert(sn);
            txtarr = arrrest[sn];
            arrrest.splice(sn,1);    // splice参数中第一个, 是起始索引(从0算起);   第二个,是删除元素的个数,在此只删除一个元素
            break;
        }
    }

    //alert("已选：");
    //alert(sn);
}




//
function ShowQuestions() 
{

    if(c60==0){
        begin60();
        begin80();
    }


    //alert("Show");
    ChoosingQuestions();

    if ( arrlength9 == 0 )
    {
        txtEnd = "  没有数据！";
        clearTimeout(t);  // 停止 计时
    }

    else if ( arrlength>0 )
    {
        if ( TimeEnd == 0 )
        {
            calculateCount60++;
        }
        calculateCount80++;
        txtEnd = "";
        txtEnd = "  " + txtarr   // + " ；数组序号：" + sn + "数组总长=?" + arrlength + "；timesget=" + timesget+ "；arrhis.length=" + arrhis.length;
    }

    else
    {
        //txtEnd = txtarr + "  全部完成!";
        txtEnd = "全部完成!";
        newchech = 0;     // 重新 再来
        //clearTimeout(t);  // 停止 计时
        //txtEnd = "over! " + txtarr  + " ；数组序号：" + sn + "数组总长=?" + arrlength + "；timesget=" + timesget+ "；arrhis.length=" + arrhis.length;
    }

    //document.getElementById("edt_pwd").value = txtEnd; 
    document.getElementById("edt_pwd").innerHTML = txtEnd; 
    document.getElementById("calculateCount60").innerText = calculateCount60; 
    document.getElementById("calculateCount80").innerText = calculateCount80; 
    document.getElementById("cooo").innerText = "，第" + ooo + "轮"; 


    if ( arrlength>0 && TimeEnd == 0  && c60>=60 )
    {
        TimeEnd = 1;
        //txtEnd = txtarr + "，时间到!";
        txtEnd = "时间到!";
        clearTimeout(t60);    // 停止 计时
        //c60=0; 
        //calculateCount60=0;   // 停止 计数
        //document.getElementById("edt_pwd").value = txtEnd; 
        document.getElementById("edt_pwd").innerHTML = txtEnd;

        document.getElementById('timer60').innerText = 60;   // 置为60s
        s60 = "本次成绩：" + calculateCount60 + "题/分钟" ;
        //document.getElementById("s60").innerText = s60;       // value

    }
    document.getElementById("s60").innerText = s60;       // value
    //alert(arrrest[1]);

}




// 
function answerX() 
{ 
    document.getElementById("edt_pwd").value = num1+"+"+num2+"  ="+(num1+num2); 
}




// 
function begin60()
{
    document.getElementById('timer60').innerText=c60;
    c60=c60+1;
    t60=setTimeout("begin60()",1000);
}


function begin80()
{
    document.getElementById('timer80').innerText=c80;
    c80=c80+1;
    t80=setTimeout("begin80()",1000);
}





//
function end()
{
    clearTimeout(t60);    // 停止 计时
    c60=0;

    clearTimeout(t80);    // 停止 计时
    c80=0;

    calculateCount60=0;   // 停止 计数
    calculateCount80=0;   // 停止 计数

    newchech = 0;
    ooo = 0;

    TimeEnd = 0;        // 60s 重置

    s60 = "　";

    //document.getElementById("edt_pwd").value = "  ";
    document.getElementById("edt_pwd").innerHTML = "　";

    //document.getElementById("s60").innerText = "  .";
    //document.getElementById("s60").value = "  .";


    // 清空 hisQuestions  InitialQuestions1();
	 
    //document.getElementById('timer60').innerText=0;
 
    //document.getElementById('calculateCount60').innerText=c;
 }


//-->
</script>



</head>


<body style="background-color:#EAEAEA;">

<form>

  <table style="width:960;">
    <tr>
      <td align=left style="font-size:60px" >
          <a href="index.html" style="font-size:65px;">【回首页】</a>
          进位加法
	</td>
    </tr>
  </table>





  <table style="width:960;height:510;">
          <tr> 
             <td colspan=2>　</td>
          </tr> 



          <tr> 
             <td colspan=2>

		<table border="1" width="960" id="tab01" height="260" cellspacing="0" style="border:0px solid #C0C0C0; padding:0px; background-color:#EAEAEA; " cellpadding="0">
			<tr>
				<td bordercolor="#C0C0C0" style="border: 1px solid #C0C0C0">　<lable style="font-size:200px;" id="edt_pwd">　</lable>  </td>
			</tr>
		</table>
                 
             </td>
          </tr> 



          <tr> 
             <td colspan=2>　</td>
          </tr> 

          <tr>
                <td colspan=2> 
                    <font size="50" color="purple">
                        <lable style="font-size:68px;" id="s60">　</lable> 
                    </font> 
                </td>
          </tr>




          <tr> 
             <td color="purple" colspan=2>
                 <input value="结束/重来" type="button" style="font-size:70px; width:960; height:100;; background-color:#B56037"  onclick="end();">
             </td>
          </tr> 

          <tr> 
             <td colspan=2>　</td>
          </tr> 


          <tr>
                <td style="width:410;">
                    <font size="18" color="black">
                        时间：　　<lable id="timer60">0</lable>
                    </font> 
                </td>
                <td> 
                    <font size="18" color="black">
                        总时间：　<lable id="timer80">0</lable>
                    </font> 
                </td>
          </tr>

          <tr>
                <td style="width:410;font-weight:bold;">
                    <font size="18" color="#800080">
                        60秒题数：<lable id="calculateCount60">0</lable> 
                    </font> 
                </td>
                <td> 
                    <font size="18" color="black">
                        累计题数：<lable id="calculateCount80">0</lable> <lable id="cooo"></lable>
                    </font> 
                </td>
          </tr>


          <tr> 
             <td colspan=2>　</td>
          </tr> 
          <tr> 
             <td color="purple" colspan=2>
                 <input value="出题" type="button" style="font-size:70px; width:960; height:150; background-color:#B56037"  onclick="ShowQuestions();">
             </td>
          </tr> 


          <tr> 
             <td colspan=2>　</td>
          </tr> 
          <tr> 
             <td colspan=2>　</td>
          </tr> 
          <tr> 
             <td colspan=2>　
                    <font size="18" color="black">
                        <lable id="ctotal"></lable>
                    </font> 
             </td>
          </tr> 




  </table>



</form>

</body>



</html>